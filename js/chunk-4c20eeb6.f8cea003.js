(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c20eeb6"],{"12ae":function(e,t,a){e.exports=a.p+"img/loading.a473d4dd.gif"},"4ec9":function(e,t,a){"use strict";a("6f48")},"59a2":function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("div")},n=[],i=(a("14d9"),a("ace4"),a("d3b7"),a("8a59"),a("907a"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("986a"),a("1d02"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("6ce5"),a("2834"),a("72f7"),a("4ea1"),a("a434"),a("4ec9"),a("3ca3"),a("ddb0"),a("a15b"),a("d81d"),a("a9e3"),a("4e82"),a("fb6a"),a("2909"));function o(e){if(Array.isArray(e))return e}a("a4d3"),a("e01a"),a("d28b");function c(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,i,o,c=[],s=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;s=!1}else for(;!(s=(r=i.call(a)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,n=e}finally{try{if(!s&&null!=a["return"]&&(o=a["return"](),Object(o)!==o))return}finally{if(u)throw n}}return c}}var s=a("06c5");a("d9e2");function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||c(e,t)||Object(s["a"])(e,t)||u()}function d(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Object(s["a"])(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a["return"]||a["return"]()}finally{if(c)throw i}}}}var f=a("c7eb"),m=a("1da1"),g=a("5530"),h=a("41cf"),b=a("2f62"),p={name:"render",components:{},data:function(){return{imageList:[],boxSize:1e3,tolerance:36,space:80,splitMinColorNum:1e4,ignoreAlpha:100,colorThief:"",colorImageList:[],maxColorNum:6,currentIndex:0,topColor:[],start:"",originUrl:"",resultUrl:"",scaleWith:0,scaleHeight:0,inputUrl:"",successProcess:!1,searchInterVal:null,activeEffectIndex:0}},computed:Object(g["a"])({},Object(b["c"])(["uploadImageUrl","effectList"])),methods:Object(g["a"])(Object(g["a"])({},Object(b["b"])(["updateLowImageUrl","updateHdImageUrl","updateUploadImageUrl"])),{},{getPngColorImage:function(){var e=this;return Object(m["a"])(Object(f["a"])().mark((function t(){return Object(f["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.successProcess=!1,e.colorImageList=[],e.currentIndex=0,e.topColor=[],e.boxSize=e.IsQuality?2e3:1e3,e.getImageListByColor();case 6:case"end":return t.stop()}}),t)})))()},getImageListByColor:function(){var e=this;return Object(m["a"])(Object(f["a"])().mark((function t(){var a,r,n;return Object(f["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.start=(new Date).getTime(),t.next=3,e.getScaleImage(e.uploadImageUrl);case 3:if(a=t.sent,e.inputUrl=a,r=!1,-1==e.uploadImageUrl.indexOf("data:image/jpg;base64,")&&-1==e.uploadImageUrl.indexOf("data:image/jpeg;base64,")&&-1==e.uploadImageUrl.indexOf(".jpg")||(r=!0),!r){t.next=15;break}return t.next=10,e.getSplitImageListByColors(e.inputUrl,e.maxColorNum,e.tolerance);case 10:n=t.sent,e.topColor=n,e.setColorImage(e.inputUrl,r),t.next=17;break;case 15:e.colorImageList.push(e.inputUrl),e.getEmbroideryImage();case 17:case"end":return t.stop()}}),t)})))()},setColorImage:function(e,t){var a=this;return Object(m["a"])(Object(f["a"])().mark((function r(){var n,i,o,c,s,u;return Object(f["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.getHaveSamplePx(e,t);case 2:n=r.sent,i=a,o=a.ignoreAlpha,c=a.tolerance,s=a.maxColorNum,n&&a.currentIndex<s?(u=new Image,u.src=e,u.onload=function(){var t=u.width,a=u.height,r=i.topColor[i.currentIndex],n=document.createElement("canvas");n.setAttribute("width",t),n.setAttribute("height",a);var s=n.getContext("2d");s.drawImage(u,0,0);for(var l=s.getImageData(0,0,t,a),d=new Uint8ClampedArray(l.data),f=new Uint8ClampedArray(l.data),m=d.length,g=0,h=0;h<m;h+=4){var b=d[h],p=d[h+1],v=d[h+2],I=d[h+3];I>o&&(Math.abs(b-r[0])<=c&&Math.abs(p-r[1])<=c&&Math.abs(v-r[2])<=c?(f[h+3]=0,g+=1):d[h+3]=0)}if(g<i.splitMinColorNum)return i.colorImageList.splice(1,0,e),void i.getEmbroideryImage();if(0==i.currentIndex)i.colorImageList.push(e);else{var w=new ImageData(d,t,a);s.putImageData(w,0,0);var x=n.toDataURL();i.colorImageList.push(x)}i.currentIndex+=1;var y=new ImageData(f,t,a);s.putImageData(y,0,0);var j=n.toDataURL();i.setColorImage(j,!1)}):(i.colorImageList.splice(1,0,e),i.getEmbroideryImage());case 8:case"end":return r.stop()}}),r)})))()},getHaveSamplePx:function(e,t){if(t)return new Promise((function(e){e(!0)}));var a=new Image;a.src=e;var r=this.tolerance,n=this.ignoreAlpha,i=this.space;return new Promise((function(e){a.onload=function(){var t=a.width,o=a.height,c=document.createElement("canvas");c.setAttribute("width",t),c.setAttribute("height",o);var s=c.getContext("2d");s.drawImage(a,0,0);for(var u=s.getImageData(0,0,t,o),l=new Uint8ClampedArray(u.data),d=l.length,f=0,m=0,g=[],h=!1,b=0;b<d;b+=4){var p=l[b],v=l[b+1],I=l[b+2],w=l[b+3];if(w>n)if(m>0)if(Math.abs(p-g[0])<=r&&Math.abs(v-g[1])<=r&&Math.abs(I-g[2])<=r)m+=1;else{if(m>=i){h=!0;break}f=0,m=0,g=[]}else g.length>0?Math.abs(p-g[0])<=r&&Math.abs(v-g[1])<=r&&Math.abs(I-g[2])<=r?f+=1:f>=i?(m+=1,g=[p,v,I]):(f=0,m=0,g=[]):(g=[p,v,I],f+=1,m=0);else f=0,m=0,g=[]}e(h)}}))},getEmbroideryImage:function(){var e=this;return Object(m["a"])(Object(f["a"])().mark((function t(){var a,r,n,i;return Object(f["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.IsQuality?e.effectList[e.activeEffectIndex].hdData:e.effectList[e.activeEffectIndex].lowData,r=[],n=0;case 3:if(!(n<e.colorImageList.length)){t.next=11;break}return t.next=6,Object(h["a"])(e.colorImageList[n],a);case 6:i=t.sent,r.push(i);case 8:n++,t.next=3;break;case 11:e.mergeImage(r);case 12:case"end":return t.stop()}}),t)})))()},mergeImage:function(e){var t=this;return Object(m["a"])(Object(f["a"])().mark((function a(){var r,n,i,o;return Object(f["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=document.createElement("canvas"),r.setAttribute("width",t.scaleWith),r.setAttribute("height",t.scaleHeight),n=r.getContext("2d"),i=0;case 5:if(!(i<e.length)){a.next=11;break}return a.next=8,t.loadImage(e[i],n);case 8:i++,a.next=5;break;case 11:o=r.toDataURL(),t.resultUrl=o,t.IsQuality?t.updateHdImageUrl(o):t.updateLowImageUrl(o),t.successProcess=!0;case 15:case"end":return a.stop()}}),a)})))()},loadImage:function(e,t){var a=new Image;a.src=e;var r=this.scaleWith,n=this.scaleHeight;return new Promise((function(e){a.onload=function(){var i=a.width,o=a.height,c=(i-r)/2,s=(o-n)/2;t.drawImage(a,c,s,r,n,0,0,r,n),e()}}))},getScaleImage:function(e){var t=new Image;t.setAttribute("crossOrigin","anonymous"),t.src=e;var a=e,r=this,n=this.boxSize;return new Promise((function(e){t.onload=function(){var i,o,c=t.width,s=t.height,u=c>s?c:s,l=n;c>s?(i=l,o=l*s/c):(o=l,i=l*c/s);var d=document.createElement("canvas");d.setAttribute("width",i),d.setAttribute("height",o),r.scaleWith=i,r.scaleHeight=o;var f=d.getContext("2d");f.drawImage(t,0,0,i,o);var m=d.toDataURL();r.originUrl=m,e(u>l?m:a)}}))},getSplitImageListByColors:function(e,t,a){var r=this;return new Promise((function(n,o){var c=new Image;c.src=e,c.setAttribute("crossOrigin","anonymous");var s=r.ignoreAlpha;c.onload=function(){var e=document.createElement("canvas"),r=e.getContext("2d"),o=c.width,u=c.height;e.width=o,e.height=u,r.drawImage(c,0,0);for(var f=r.getImageData(0,0,o,u),m=new Uint8ClampedArray(f.data),g=new Map,h=m[0],b=m[1],p=m[2],v=[h,b,p],I=m.length,w=0;w<I;w+=4){var x=m[w],y=m[w+1],j=m[w+2],O=m[w+3];if(O>s)if(Math.abs(x-v[0])<=a&&Math.abs(y-v[1])<=a&&Math.abs(j-v[2])<=a){var U=v.join(",");g.set(U,g.get(U)+1)}else{var C,A=[x,y,j],L=A.join(","),M=null,k=d(g);try{for(k.s();!(C=k.n()).done;){var E=l(C.value,2),S=E[0],D=(E[1],S.split(",").map(Number));if(Math.abs(x-D[0])<=a&&Math.abs(y-D[1])<=a&&Math.abs(j-D[2])<=a){v=Object(i["a"])(D),M=S;break}}}catch(N){k.e(N)}finally{k.f()}M?g.set(M,g.get(M)+1):g.set(L,1)}}var P=Object(i["a"])(g.entries()).sort((function(e,t){return t[1]-e[1]})),H=P.slice(0,t).map((function(e){var t=l(e,1),a=t[0];return a.split(",").map(Number)}));n(H)},c.onerror=function(){o("Error loading image")}}))}}),watch:{},mounted:function(){return Object(m["a"])(Object(f["a"])().mark((function e(){return Object(f["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},v=p,I=a("2877"),w=Object(I["a"])(v,r,n,!1,null,"8f37949a",null);t["a"]=w.exports},"6f48":function(e,t,a){"use strict";var r=a("6d61"),n=a("6566");r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n)},"8a59":function(e,t,a){"use strict";var r=a("74e8");r("Uint8",(function(e){return function(t,a,r){return e(this,t,a,r)}}),!0)},a15b:function(e,t,a){"use strict";var r=a("23e7"),n=a("e330"),i=a("44ad"),o=a("fc6a"),c=a("a640"),s=n([].join),u=i!==Object,l=u||!c("join",",");r({target:"Array",proto:!0,forced:l},{join:function(e){return s(o(this),void 0===e?",":e)}})},c482:function(e,t,a){e.exports=a.p+"img/download.9049c273.svg"},d81d:function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").map,i=a("1dde"),o=i("map");r({target:"Array",proto:!0,forced:!o},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);