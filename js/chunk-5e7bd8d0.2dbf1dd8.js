(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e7bd8d0"],{"0712":function(t,e,a){},"14f1":function(t,e,a){t.exports=a.p+"img/result.4b1f6393.webp"},"2af1":function(t,e,a){"use strict";var n=a("23e7"),s=a("f748");n({target:"Math",stat:!0},{sign:s})},"330c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"container"},[e("div",{staticClass:"toolbar"},[e("div",{staticClass:"Vtoolbar_wrap"},[e("div",{staticClass:"switch-wrap"},[e("el-switch",{staticStyle:{zoom:"1.1"},attrs:{"active-text":t.$t("hd"),"inactive-text":t.$t("low")},on:{change:t.qualityChange},model:{value:t.IsQuality,callback:function(e){t.IsQuality=e},expression:"IsQuality"}})],1),e("a",{staticClass:"blue_button button_base",attrs:{id:"App-DownloadLink",href:"./#/download",title:t.$t("download"),alt:t.$t("download")}},[t._m(0),e("span",[t._v(" Â "+t._s(t.$t("download"))+" ")])])])]),e("button",{staticClass:"cancel_button blue_button button_base",attrs:{title:"Exit",id:"App-Toolbar-Exit"},on:{click:t.closeToBack}},[e("img",{attrs:{src:a("541d"),importance:"low",decode:"async",loading:"lazy"}})])]),e("previewComponents",{attrs:{originUrl:t.originUrl,resultUrl:t.resultUrl,boxSize:t.boxSize}}),t.successProcess?t._e():e("div",{staticClass:"progress-wrap"},[e("img",{attrs:{src:a("12ae"),alt:"loading"}})])],1)},s=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"icon_left",staticStyle:{position:"relative"}},[e("img",{attrs:{src:a("c482"),importance:"low",decode:"async",loading:"lazy",id:"Viewer-DownloadCurrentIcon"}})])}],o=(a("14d9"),a("c7eb")),r=a("1da1"),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"canvas-container"},[e("canvas",{ref:"canvas1",staticClass:"canvas canvas1"}),e("canvas",{ref:"canvas2",staticClass:"canvas canvas2"})])},h=[],u=(a("a9e3"),a("2af1"),a("5530")),l=a("2f62"),f={props:{originUrl:String,resultUrl:String,boxSize:Number},data:function(){return{canvas1:null,canvas2:null,ctx1:null,ctx2:null,img1:new Image,img2:new Image,isDragging:!1,offsetX1:0,offsetY1:0,offsetX2:0,offsetY2:0,scale1:.8,scale2:.8,startX:0,startY:0,canvasScale:1}},computed:Object(u["a"])({},Object(l["c"])(["uploadImageName"])),methods:{drawCanvas1:function(){this.ctx1.clearRect(0,0,this.canvas1.width,this.canvas1.height),this.ctx1.drawImage(this.img1,this.offsetX1,this.offsetY1,this.img1.width*this.scale1,this.img1.height*this.scale1),this.ctx1.font="bold ".concat(this.boxSize/1e3*20,"px Arial"),this.ctx1.fillStyle="rgba(0, 0, 0, 1)";var t="Original Image",e=this.boxSize/2-100,a=this.boxSize/10,n=this.boxSize/10*9;this.ctx1.fillText(t,e,a),this.ctx1.fillText(this.uploadImageName,e-100,n),requestAnimationFrame(this.drawCanvas1)},drawCanvas2:function(){this.ctx2.clearRect(0,0,this.canvas2.width,this.canvas2.height),this.ctx2.drawImage(this.img2,this.offsetX2,this.offsetY2,this.img2.width*this.scale2,this.img2.height*this.scale2),this.ctx2.font="bold ".concat(this.boxSize/1e3*20,"px Arial"),this.ctx2.fillStyle="rgba(0, 0, 0, 1)";var t="EffectImg Result",e=this.boxSize/2-100,a=this.boxSize/10,n=this.boxSize/10*9;this.ctx2.fillText(t,e,a),this.ctx2.fillText(this.uploadImageName,e-100,n),requestAnimationFrame(this.drawCanvas2)},handleMouseDown:function(t,e){this.isDragging=!0,this.startX=t.clientX*this.canvasScale-(e===this.canvas1?this.offsetX1:this.offsetX2),this.startY=t.clientY*this.canvasScale-(e===this.canvas1?this.offsetY1:this.offsetY2)},handleMouseUp:function(){this.isDragging=!1},handleMouseMove:function(t,e){if(this.isDragging){var a=t.clientX*this.canvasScale-this.startX,n=t.clientY*this.canvasScale-this.startY;e===this.canvas1?(this.offsetX1=a,this.offsetY1=n):(this.offsetX2=a,this.offsetY2=n)}},handleMouseWheel:function(t,e){var a,n,s,i,o=Math.sign(t.deltaY),r=t.clientX*this.canvasScale-e.offsetLeft*this.canvasScale,c=t.clientY*this.canvasScale-e.offsetTop*this.canvasScale,h=.2;e===this.canvas1?(a=this.scale1,n=Math.max(.1,Math.min(10,this.scale1-o*this.scale1*h)),s=this.offsetX1,i=this.offsetY1):(a=this.scale2,n=Math.max(.1,Math.min(10,this.scale2-o*this.scale2*h)),s=this.offsetX2,i=this.offsetY2),s=n/a*(s-r)+r,i=n/a*(i-c)+c,e===this.canvas1?(this.scale1=n,this.offsetX1=s,this.offsetY1=i,this.scale2=this.scale1,this.offsetX2=this.offsetX1,this.offsetY2=this.offsetY1):(this.scale2=n,this.offsetX2=s,this.offsetY2=i,this.scale1=this.scale2,this.offsetX1=this.offsetX2,this.offsetY1=this.offsetY2),t.preventDefault()},handleResize:function(){this.canvas1.width=this.canvas1.offsetWidth*this.canvasScale,this.canvas1.height=this.canvas1.offsetHeight*this.canvasScale,this.canvas2.width=this.canvas2.offsetWidth*this.canvasScale,this.canvas2.height=this.canvas2.offsetHeight*this.canvasScale}},watch:{resultUrl:{handler:function(t){var e=this;this.img1.src=this.originUrl,this.img2.src=t,this.img1.onload=function(){var t=e.img1,a=t.width,n=t.height,s=e.canvas1.offsetHeight;e.canvasScale=n/s,e.offsetX1=(e.canvas1.offsetWidth*e.canvasScale-a)/2+e.boxSize/10,e.offsetX2=(e.canvas1.offsetWidth*e.canvasScale-a)/2+e.boxSize/10,e.offsetY1=(e.canvas1.offsetHeight*e.canvasScale-n)/2+e.boxSize/10,e.offsetY2=(e.canvas1.offsetHeight*e.canvasScale-n)/2+e.boxSize/10,e.handleResize(),e.drawCanvas1()},this.img2.onload=function(){e.drawCanvas2()}}}},mounted:function(){var t=this;this.canvas1=this.$refs.canvas1,this.canvas2=this.$refs.canvas2,this.ctx1=this.canvas1.getContext("2d"),this.ctx2=this.canvas2.getContext("2d"),this.canvas1.addEventListener("mousedown",(function(e){return t.handleMouseDown(e,t.canvas1)})),this.canvas2.addEventListener("mousedown",(function(e){return t.handleMouseDown(e,t.canvas2)})),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("mousemove",(function(e){return t.handleMouseMove(e,t.canvas1)})),window.addEventListener("mousemove",(function(e){return t.handleMouseMove(e,t.canvas2)})),this.canvas1.addEventListener("wheel",(function(e){return t.handleMouseWheel(e,t.canvas1)})),this.canvas2.addEventListener("wheel",(function(e){return t.handleMouseWheel(e,t.canvas2)})),window.addEventListener("resize",this.handleResize)}},v=f,d=(a("debf"),a("2877")),g=Object(d["a"])(v,c,h,!1,null,"6ce0e6b8",null),p=g.exports,m=a("59a2");if(!b)var b={map:function(t,e){var a={};return e?t.map((function(t,n){return a.index=n,e.call(a,t)})):t.slice()},naturalOrder:function(t,e){return t<e?-1:t>e?1:0},sum:function(t,e){var a={};return t.reduce(e?function(t,n,s){return a.index=s,t+e.call(a,n)}:function(t,e){return t+e},0)},max:function(t,e){return Math.max.apply(null,e?b.map(t,e):t)}};var w=function(){var t=5,e=8-t,a=1e3;function n(e,a,n){return(e<<2*t)+(a<<t)+n}function s(t){var e=[],a=!1;function n(){e.sort(t),a=!0}return{push:function(t){e.push(t),a=!1},peek:function(t){return a||n(),void 0===t&&(t=e.length-1),e[t]},pop:function(){return a||n(),e.pop()},size:function(){return e.length},map:function(t){return e.map(t)},debug:function(){return a||n(),e}}}function i(t,e,a,n,s,i,o){var r=this;r.r1=t,r.r2=e,r.g1=a,r.g2=n,r.b1=s,r.b2=i,r.histo=o}function o(){this.vboxes=new s((function(t,e){return b.naturalOrder(t.vbox.count()*t.vbox.volume(),e.vbox.count()*e.vbox.volume())}))}function r(t,e){if(e.count()){var a=e.r2-e.r1+1,s=e.g2-e.g1+1,i=b.max([a,s,e.b2-e.b1+1]);if(1==e.count())return[e.copy()];var o,r,c,h,u=0,l=[],f=[];if(i==a)for(o=e.r1;o<=e.r2;o++){for(h=0,r=e.g1;r<=e.g2;r++)for(c=e.b1;c<=e.b2;c++)h+=t[n(o,r,c)]||0;l[o]=u+=h}else if(i==s)for(o=e.g1;o<=e.g2;o++){for(h=0,r=e.r1;r<=e.r2;r++)for(c=e.b1;c<=e.b2;c++)h+=t[n(r,o,c)]||0;l[o]=u+=h}else for(o=e.b1;o<=e.b2;o++){for(h=0,r=e.r1;r<=e.r2;r++)for(c=e.g1;c<=e.g2;c++)h+=t[n(r,c,o)]||0;l[o]=u+=h}return l.forEach((function(t,e){f[e]=u-t})),function(t){var a,n,s,i,r,c=t+"1",h=t+"2",v=0;for(o=e[c];o<=e[h];o++)if(l[o]>u/2){for(s=e.copy(),i=e.copy(),r=(a=o-e[c])<=(n=e[h]-o)?Math.min(e[h]-1,~~(o+n/2)):Math.max(e[c],~~(o-1-a/2));!l[r];)r++;for(v=f[r];!v&&l[r-1];)v=f[--r];return s[h]=r,i[c]=s[h]+1,[s,i]}}(i==a?"r":i==s?"g":"b")}}return i.prototype={volume:function(t){var e=this;return e._volume&&!t||(e._volume=(e.r2-e.r1+1)*(e.g2-e.g1+1)*(e.b2-e.b1+1)),e._volume},count:function(t){var e=this,a=e.histo;if(!e._count_set||t){var s,i,o,r=0;for(s=e.r1;s<=e.r2;s++)for(i=e.g1;i<=e.g2;i++)for(o=e.b1;o<=e.b2;o++)r+=a[n(s,i,o)]||0;e._count=r,e._count_set=!0}return e._count},copy:function(){var t=this;return new i(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(e){var a=this,s=a.histo;if(!a._avg||e){var i,o,r,c,h=0,u=1<<8-t,l=0,f=0,v=0;for(o=a.r1;o<=a.r2;o++)for(r=a.g1;r<=a.g2;r++)for(c=a.b1;c<=a.b2;c++)h+=i=s[n(o,r,c)]||0,l+=i*(o+.5)*u,f+=i*(r+.5)*u,v+=i*(c+.5)*u;a._avg=h?[~~(l/h),~~(f/h),~~(v/h)]:[~~(u*(a.r1+a.r2+1)/2),~~(u*(a.g1+a.g2+1)/2),~~(u*(a.b1+a.b2+1)/2)]}return a._avg},contains:function(t){var a=this,n=t[0]>>e;return gval=t[1]>>e,bval=t[2]>>e,n>=a.r1&&n<=a.r2&&gval>=a.g1&&gval<=a.g2&&bval>=a.b1&&bval<=a.b2}},o.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map((function(t){return t.color}))},size:function(){return this.vboxes.size()},map:function(t){for(var e=this.vboxes,a=0;a<e.size();a++)if(e.peek(a).vbox.contains(t))return e.peek(a).color;return this.nearest(t)},nearest:function(t){for(var e,a,n,s=this.vboxes,i=0;i<s.size();i++)((a=Math.sqrt(Math.pow(t[0]-s.peek(i).color[0],2)+Math.pow(t[1]-s.peek(i).color[1],2)+Math.pow(t[2]-s.peek(i).color[2],2)))<e||void 0===e)&&(e=a,n=s.peek(i).color);return n},forcebw:function(){var t=this.vboxes;t.sort((function(t,e){return b.naturalOrder(b.sum(t.color),b.sum(e.color))}));var e=t[0].color;e[0]<5&&e[1]<5&&e[2]<5&&(t[0].color=[0,0,0]);var a=t.length-1,n=t[a].color;n[0]>251&&n[1]>251&&n[2]>251&&(t[a].color=[255,255,255])}},{quantize:function(c,h){if(!c.length||h<2||h>256)return!1;var u=function(a){var s,i=new Array(1<<3*t);return a.forEach((function(t){s=n(t[0]>>e,t[1]>>e,t[2]>>e),i[s]=(i[s]||0)+1})),i}(c);u.forEach((function(){}));var l=function(t,a){var n,s,o,r=1e6,c=0,h=1e6,u=0,l=1e6,f=0;return t.forEach((function(t){(n=t[0]>>e)<r?r=n:n>c&&(c=n),(s=t[1]>>e)<h?h=s:s>u&&(u=s),(o=t[2]>>e)<l?l=o:o>f&&(f=o)})),new i(r,c,h,u,l,f,a)}(c,u),f=new s((function(t,e){return b.naturalOrder(t.count(),e.count())}));function v(t,e){for(var n,s=t.size(),i=0;i<a;){if(s>=e)return;if(i++>a)return;if((n=t.pop()).count()){var o=r(u,n),c=o[0],h=o[1];if(!c)return;t.push(c),h&&(t.push(h),s++)}else t.push(n),i++}}f.push(l),v(f,.75*h);for(var d=new s((function(t,e){return b.naturalOrder(t.count()*t.volume(),e.count()*e.volume())}));f.size();)d.push(f.pop());v(d,h);for(var g=new o;d.size();)g.push(d.pop());return g}}}().quantize,x=function(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=t.naturalWidth,this.height=this.canvas.height=t.naturalHeight,this.context.drawImage(t,0,0,this.width,this.height)};x.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var C=function(){};C.prototype.getColor=function(t,e){return void 0===e&&(e=10),this.getPalette(t,5,e)[0]},C.prototype.getPalette=function(t,e,a){var n=function(t){var e=t.colorCount,a=t.quality;if(void 0!==e&&Number.isInteger(e)){if(1===e)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");e=Math.max(e,2),e=Math.min(e,20)}else e=10;return(void 0===a||!Number.isInteger(a)||a<1)&&(a=10),{colorCount:e,quality:a}}({colorCount:e,quality:a}),s=new x(t),i=function(t,e,a){for(var n,s,i,o,r,c=t,h=[],u=0;u<e;u+=a)s=c[0+(n=4*u)],i=c[n+1],o=c[n+2],(void 0===(r=c[n+3])||r>=125)&&(s>250&&i>250&&o>250||h.push([s,i,o]));return h}(s.getImageData().data,s.width*s.height,n.quality),o=w(i,n.colorCount);return o?o.palette():null},C.prototype.getColorFromUrl=function(t,e,a){var n=this,s=document.createElement("img");s.addEventListener("load",(function(){var i=n.getPalette(s,5,a);e(i[0],t)})),s.src=t},C.prototype.getImageData=function(t,e){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){if(200==this.status){var t=new Uint8Array(this.response);i=t.length;for(var a=new Array(i),n=0;n<t.length;n++)a[n]=String.fromCharCode(t[n]);var s=a.join(""),o=window.btoa(s);e("data:image/png;base64,"+o)}},a.send()},C.prototype.getColorAsync=function(t,e,a){var n=this;this.getImageData(t,(function(t){var s=document.createElement("img");s.addEventListener("load",(function(){var t=n.getPalette(s,5,a);e(t[0],this)})),s.src=t}))};var y={name:"cover",components:{previewComponents:p},mixins:[m["a"]],data:function(){return{IsQuality:!1}},computed:{},methods:{effectClick:function(t){this.activeEffectIndex=t,this.getPngColorImage()},qualityChange:function(){this.getPngColorImage()},closeToBack:function(){this.$router.push("/")}},watch:{},mounted:function(){var t=this;return Object(r["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.colorThief=new C,t.$route.query.example&&(t.updateUploadImageUrl(a("f226")),t.updateLowImageUrl(a("14f1"))),t.uploadImageUrl?window.wnd.loaded?t.getImageListByColor():t.searchInterVal=setInterval((function(){window.wnd.loaded&&(clearInterval(t.searchInterVal),t.getImageListByColor())}),100):t.$router.push("/");case 3:case"end":return e.stop()}}),e)})))()}},S=y,I=(a("7381"),Object(d["a"])(S,n,s,!1,null,"36f712de",null));e["default"]=I.exports},"3aeb":function(t,e,a){},"541d":function(t,e,a){t.exports=a.p+"img/cancel.e8e7b8eb.svg"},7381:function(t,e,a){"use strict";a("0712")},debf:function(t,e,a){"use strict";a("3aeb")},f226:function(t,e,a){t.exports=a.p+"img/example.e4106a51.webp"}}]);